{% extends 'base.html' %}

{% load profiles_tags %}
{% load static from staticfiles %}

{% block body_class %}homepage{% endblock %}

{% block extra-js %}
    <script src="{% static 'libs/parse-query.js' %}"></script>
    <script src="{% static 'js/bootstrap-youtube.js' %}"></script>
{% endblock %}

{% block hero %}
    <div id="youtube-wrapper" data-href="https://www.youtube.com/watch?v=TFZN1lMp5Hk">
        <div class="iframe-wrapper">

        </div>
        <div class="close">X</div>
    </div>
    <div class="video-wrapper" data-href="https://www.youtube.com/watch?v=TFZN1lMp5Hk">
        {% include 'includes/video.html' with object=object auto_play=True loop=True %}
    </div>
    <div class="play"><i class="fa fa-play-circle-o"></i> <br><span>View Trailer</span></div>
{% endblock %}

{% block content %}
    <div class="content-wrapper">
        <div class="row">
            <div class="col-md-6 article">
                <div class="article-inner-wrapper wow slideInLeft" data-wow-duration="2s">
                    <h2>{{ object.name }}</h2>
                    <p class="byline text-center">By {{ object.writer.first_name }} {{ object.writer.last_name }}</p>

                    {% include 'includes/read-more.html' with content=object.content button_text='Read More' toggle_selector='.hidden-episodes' %}
                </div>
            </div>
            {% get_current_episode as current_episode %}
            {% get_next_episode as next_episode %}
            <div class="col-md-6 homepage-episodes">
                {# NEWEST EPISODE#}
                <div class="episode clearfix" onclick="window.location='{{ current_episode.get_absolute_url }}'" >
                    <div class="new-episode col-md-6">
                        {% if current_episode.homepage_thumbnail %}
                            <img src="{{ current_episode.homepage_thumbnail.url }}" class=" wow slideInRight" data-wow-duration="2s" alt="{{ current_episode.name }}"/>
                        {% endif %}
                    </div>
                    <div class="episode-text col-md-6">
                        <div>
                            {{ current_episode.homepage_blurb|safe }}
                        </div>
                    </div>
                </div>
                {# NEXT EPISODE #}
                <div class="episode clearfix" onclick="window.location='{{ next_episode.get_absolute_url }}'">
                    <div class="episode-text col-md-6">
                        <div>
                            {{ next_episode.homepage_blurb|safe }}
                        </div>
                    </div>
                    <div class="next-episode col-md-6">
                        {% if next_episode.homepage_thumbnail %}
                            <img src="{{ next_episode.homepage_thumbnail.url }}" class=" wow slideInRight" data-wow-duration="2s" alt="{{ next_episode.name }}"/>
                        {% endif %}
                    </div>
                </div>
                {% get_episodes as episodes %}
                {# THE REST OF EPISODES #}
                <div class="hidden-episodes hidden">
                    <div class="col-md-6">
                        {% for episode in episodes %}
                            {% if episode.dropdown_thumbnail and not forloop.counter|divisibleby:2  and episode != current_episode and episode != next_episode %}
                                <a href="{{ episode.get_absolute_url }}"><img src="{{ episode.dropdown_thumbnail.url }}" alt="{{ episode.name }}"/></a>
                            {% endif %}
                        {% endfor %}
                    </div>
                    <div class="col-md-6">
                        {% for episode in episodes %}
                            {% if episode.dropdown_thumbnail and forloop.counter|divisibleby:2  and episode != current_episode and episode != next_episode %}
                                <a href="{{ episode.get_absolute_url }}"><img src="{{ episode.dropdown_thumbnail.url }}" alt="{{ episode.name }}"/></a>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="feature">
        <div class="wrap">
            <h2 class="lg_title"><span class="cursive-font">Someone come to mind?</span></h2>
            <h2 class="lg_title">nominate a Radiant Human</h2>
            <a class="btn btn-warning" href="#subscribe_form">Show Me How</a>
        </div>
    </div>
{% endblock content %}
